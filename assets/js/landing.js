!function(k){"use strict";k(document).ready(function(){k(".intro").height(window.innerHeight-40+"px");var t=k("html").attr("lang"),a=k("body").data("place"),e={button:k(".nav__lang"),langSelector:k(".lang__selector"),langList:k(".lang__list"),animSpeed:300},n={button:k(".nav__menu-bar"),list:k(".nav__list"),icon:k(".menu-bar__icon")},o={button:k(".faq__question"),toggleItem:k(".faq__item"),activeClassName:"faq__item--active"},i="%20%20%0A",r=".popup__success",c=".popup__fail";function s(e){var t=k("."+e+"__form"),a=encodeURIComponent(k(t).find("input[name=date]").val()),n={name:encodeURIComponent(k(t).find("input[name=name]").val()),tel:encodeURIComponent(k(t).find("input[name=number]").val())};return void 0!==a&&(n.date=a),n}var l,u,p,m,d,g="https://api.telegram.org/",_="600886194:AAE9J4QAnvj-iqNZwRpG7HQMVBuEcE8B-Yc",f="-196935120",v="markdown",h={getBookMessage:function(){var e=s("book");return"*BOOK request*"+i+"Place: *"+a+i+"*On: *"+e.date+i+"*Name: *"+e.name+i+"*Tel."+e.tel+i+"*_Lang: "+t+"_"},getGiftMessage:function(){var e=s("cert");return"*GIFT certificate request*"+i+"Place: *"+a+i+"*On: *"+e.date+i+"*Name: *"+e.name+i+"*Tel."+e.tel+i+"*_Lang: "+t+"_"},getCallMessage:function(){var e=s("call");return"*CALL request*"+i+"Place: *"+a+i+"*On: *"+e.date+i+"*Name: *"+e.name+i+"*Tel."+e.tel+i+"*_Lang: "+t+"_"}};k(".popup__link").magnificPopup({type:"inline",midClick:!0,callbacks:{open:function(){"true"!==k(".book__nearest-dates").attr("data-loaded")&&k.getJSON("/kyivFlights.json",function(e){var n=new Date,o=[];k.each(e.dates,function(e,t){var a=new Date(t);n<=a&&(a.setHours(0),o.push(a.toString()))}),k("#book-date").datepicker({minDate:new Date,showOtherYears:!1,autoClose:!0,onRenderCell:function(e,t){if("day"==t){var a=e.toString();return{disabled:-1==o.indexOf(a)}}}}),k(".book__nearest-dates").addClass("book__nearest-dates--active"),k(".book__nearest-dates").attr("data-loaded","true")})}}}),k(".confirm-button").on("click",function(e){var t=e.target,n=k(t).parents(".popup__main"),a=k(t).parents(".popup"),o=k(a).attr("id");if(i=o,s=!0,k.each(k("#"+i).find("input"),function(e,t){""==k(t).val()?(k(t).addClass("form__input--must-fill"),s=!1):k(t).removeClass("form__input--must-fill")}),s){var i,s,l=g+"bot"+_+"/sendMessage?chat_id="+f+"&parse_mode="+v;switch(o){case"book-popup":l+="&text="+h.getBookMessage();break;case"cert-popup":l+="&text="+h.getGiftMessage();break;case"call-popup":l+="&text="+h.getCallMessage()}k.ajax(l).done(function(e){var t=k(r).html(),a=k(c).html();!0===e.ok?k(n).replaceWith(t):k(n).replaceWith(a)}).fail(function(){var e=k(c).html();k(n).replaceWith(e)})}}),k(document).on("click",'a[href^="#"]',function(e){"#book-popup"!==k.attr(this,"href")&&(e.preventDefault(),k("html, body").animate({scrollTop:k(k.attr(this,"href")).offset().top},500))}),k(document).on("click",function(){k(e.langSelector).hide(e.animSpeed)}),k(e.button).on("click",function(){event.stopPropagation(),k(e.langSelector).toggle(e.animSpeed)}),k(n.button).on("click",function(){k(n.icon).toggleClass("menu-bar--menu-active"),k(n.list).toggleClass("nav__list--menu-active"),k(e.langList).toggleClass("lang__list--menu-active")}),k(o.button).on("click",function(e){var t=k(this).parent(o.toggleItem);t.hasClass(o.activeClassName)?t.removeClass(o.activeClassName):(k("."+o.activeClassName).removeClass(o.activeClassName),k(this).parent(o.toggleItem).addClass(o.activeClassName))}),"kyiv"===a&&k(".team__carousel").slick({infinite:!0,mobileFirst:!0,slidesToShow:2,slidesToScroll:2,dots:!0,arrows:!1,autoplay:!0,responsive:[{breakpoint:525,settings:{slidesToShow:3}}]}),l=document,u="script",p="facebook-jssdk",d=l.getElementsByTagName(u)[0],l.getElementById(p)||((m=l.createElement(u)).id=p,m.src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0",d.parentNode.insertBefore(m,d))})}(jQuery);
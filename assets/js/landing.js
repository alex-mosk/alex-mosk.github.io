!function(k){"use strict";k(document).ready(function(){k(".intro").height(window.innerHeight-40+"px");var t=k("html").attr("lang"),a=k("body").data("place"),e="/"+a+"Flights.json",n={button:k(".nav__lang"),langSelector:k(".lang__selector"),langList:k(".lang__list"),animSpeed:300},o={button:k(".nav__menu-bar"),list:k(".nav__list"),icon:k(".menu-bar__icon")},i={button:k(".faq__question"),toggleItem:k(".faq__item"),activeClassName:"faq__item--active"},s="%20%20%0A",r=".popup__success",c=".popup__fail";function l(e){var t=k("."+e+"__form"),a=encodeURIComponent(k(t).find("input[name=date]").val()),n={name:encodeURIComponent(k(t).find("input[name=name]").val()),tel:encodeURIComponent(k(t).find("input[name=number]").val())};return void 0!==a&&(n.date=a),n}var u,p,m,d,g,f="https://api.telegram.org/",_="600886194:AAE9J4QAnvj-iqNZwRpG7HQMVBuEcE8B-Yc",v="-196935120",h="markdown",b={getBookMessage:function(){var e=l("book");return"*BOOK request*"+s+"Place: *"+a+s+"*On: *"+e.date+s+"*Name: *"+e.name+s+"*Tel. *"+e.tel+s+"*_Lang: "+t+"_"},getGiftMessage:function(){var e=l("cert");return"*GIFT certificate request*"+s+"Place: *"+a+s+"*On: *"+e.date+s+"*Name: *"+e.name+s+"*Tel. *"+e.tel+s+"*_Lang: "+t+"_"},getCallMessage:function(){var e=l("call");return"*CALL request*"+s+"Place: *"+a+s+"*On: *"+e.date+s+"*Name: *"+e.name+s+"*Tel. *"+e.tel+s+"*_Lang: "+t+"_"}};k.getJSON(e,function(e){var n=new Date,o=[];k.each(e.dates,function(e,t){var a=new Date(t);n<=a&&(a.setHours(0),o.push(a.toString()))}),k("#book-date").datepicker({minDate:new Date,showOtherYears:!1,autoClose:!0,onRenderCell:function(e,t){if("day"==t){var a=e.toString();return{disabled:-1==o.indexOf(a)}}}}),k(".book__nearest-dates").addClass("book__nearest-dates--active")}),k(".popup__link").magnificPopup({type:"inline",midClick:!0}),k(".confirm-button").on("click",function(e){var t=e.target,n=k(t).parents(".popup__main"),a=k(t).parents(".popup"),o=k(a).attr("id");if(i=o,s=!0,k.each(k("#"+i).find("input"),function(e,t){""==k(t).val()?(k(t).addClass("form__input--must-fill"),s=!1):k(t).removeClass("form__input--must-fill")}),s){var i,s,l=f+"bot"+_+"/sendMessage?chat_id="+v+"&parse_mode="+h;switch(o){case"book-popup":l+="&text="+b.getBookMessage();break;case"cert-popup":l+="&text="+b.getGiftMessage();break;case"call-popup":l+="&text="+b.getCallMessage()}k.ajax(l).done(function(e){var t=k(r).html(),a=k(c).html();!0===e.ok?k(n).replaceWith(t):k(n).replaceWith(a)}).fail(function(){var e=k(c).html();k(n).replaceWith(e)})}}),k(document).on("click",'a[href^="#"]',function(e){"#book-popup"!==k.attr(this,"href")&&(e.preventDefault(),k("html, body").animate({scrollTop:k(k.attr(this,"href")).offset().top},500))}),k(document).on("click",function(){k(n.langSelector).hide(n.animSpeed)}),k(n.button).on("click",function(){event.stopPropagation(),k(n.langSelector).toggle(n.animSpeed)}),k(o.button).on("click",function(){k(o.icon).toggleClass("menu-bar--menu-active"),k(o.list).toggleClass("nav__list--menu-active"),k(n.langList).toggleClass("lang__list--menu-active")}),k(i.button).on("click",function(e){var t=k(this).parent(i.toggleItem);t.hasClass(i.activeClassName)?t.removeClass(i.activeClassName):(k("."+i.activeClassName).removeClass(i.activeClassName),k(this).parent(i.toggleItem).addClass(i.activeClassName))}),"kyiv"===a&&k(".team__carousel").slick({infinite:!0,mobileFirst:!0,slidesToShow:2,slidesToScroll:2,dots:!0,arrows:!1,autoplay:!0,pauseOnHover:!1,responsive:[{breakpoint:525,settings:{slidesToShow:3}}]}),u=document,p="script",m="facebook-jssdk",g=u.getElementsByTagName(p)[0],u.getElementById(m)||((d=u.createElement(p)).id=m,d.src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0",g.parentNode.insertBefore(d,g))})}(jQuery);